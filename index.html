<!DOCTYPE html>
<html>
<head>
	<title>Data reader</title>
	<script type="text/JavaScript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js" ></script>
	<script src="jquery-csv.js"></script>
</head>

<body>

<h1>Health Analysis</h1>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
<script type="text/javascript">
	var superTable = [];
		$(function () {
				$("#upload").bind("click", function () {
						var regex = /^([a-zA-Z0-9\s_\\.\-:])+(.csv|.txt)$/;
						if (regex.test($("#fileUpload").val().toLowerCase())) {
								if (typeof (FileReader) != "undefined") {
										var reader = new FileReader();
										reader.onload = function (e) {
												var table = $("<table />");
												var rows = e.target.result.split("\n");
												for (var i = 0; i < rows.length; i++) {
														var row = $("<tr />");
														var cells = rows[i].split(",");
														if (cells.length > 1) {
																for (var j = 0; j < cells.length; j++) {
																		var cell = $("<td />");
																		cell.html(cells[j]);
																		row.append(cell);
																}
																table.append(row);
														}
												}
												$("#dvCSV").html('');
												$("#dvCSV").append(table);
												superTable.append(table);
										}
										reader.readAsText($("#fileUpload")[0].files[0]);
								} else {
										alert("This browser does not support HTML5.");
								}
						} else {
								alert("Please upload a valid CSV file.");
						}
				});
		});

		
		function printTable() {
			document.write(supertable[0][0]);
		}

</script>
<input type="file" id="fileUpload" />
<input type="button" id="upload" value="Upload" />
<input type="button" id="calculate" value= "Print" onclick="printTable()" />

<p id="tabler">A Paragraph</p>

<hr />
<div id="dvCSV">
</div>

</script>

</body>
</html>